# Platform Certification

This is helper script to show platform certification job status.

## Requirements

You will need:
- python3
- python modules for: requests, tabulate, re and argparse

## Usage

```
% python3 job_summary.py -h
usage: job_summary.py [-h] [--release RELEASE] [--build BUILD]
                      [--previous PREVIOUS] [--table TABLE] [--job JOB]
                      [--status STATUS]

Generate platform certification summary

optional arguments:
  -h, --help            show this help message and exit
  --release RELEASE, -r RELEASE
                        Release number. Default to 7.0.0
  --build BUILD, -b BUILD
                        Build number. Default to 4342.
  --previous PREVIOUS, -p PREVIOUS
                        Previous Build number. Default to 4291.
  --table TABLE, -t TABLE
                        Table format can be line or grid. Default to line.
  --job JOB, -j JOB     List of job name to display and process. Default to all
                        jobs.
  --status STATUS, -s STATUS
                        List of job status to show instead of pass/total.
                        Default to ABORTED jobs.
```

## Examples

To show summary for build 4342, compare to build 4291, show table as grid and show status for successful/aborted jobs instead of test count:
```
% python3 job_summary.py -r 7.0.0 -b 4342 -p 4291 -t grid -s SUCCESS,ABORTED
=====================================
Platform Certification for 7.0.0-4342
=====================================

+----------------------+-------------+-------------------+--------------+--------------+------------+----------+-------------+----------+---------+
| 0_job                | 1_centos8   | 2_centosnonroot   | 3_debian10   | 4_ubuntu20   | 5_suse15   | 6_oel8   | 7_windows   | 8_ipv6   | 9_ce    |
+======================+=============+===================+==============+==============+============+==========+=============+==========+=========+
| 2i                   | 18/19       | 17/19             | 18/19        | 18/19        | 18/19      | 17/19    | 18/19       | 4/19     | 0/10    |
+----------------------+-------------+-------------------+--------------+--------------+------------+----------+-------------+----------+---------+
| analytics            | SUCCESS     | SUCCESS           | SUCCESS      | SUCCESS      | SUCCESS    | SUCCESS  | SUCCESS     |          |         |
+----------------------+-------------+-------------------+--------------+--------------+------------+----------+-------------+----------+---------+
| bucket_ops           | SUCCESS     | SUCCESS           | SUCCESS      | SUCCESS      | SUCCESS    | SUCCESS  | SUCCESS     | SUCCESS  | SUCCESS |
+----------------------+-------------+-------------------+--------------+--------------+------------+----------+-------------+----------+---------+
| collections          | 18/22       | SUCCESS           | 20/22        | 19/22        | 20/22      | SUCCESS  | 6/22        | 20/22    | 18/22   |
+----------------------+-------------+-------------------+--------------+--------------+------------+----------+-------------+----------+---------+
| durability           | SUCCESS     | 13/14             | SUCCESS      | SUCCESS      | SUCCESS    | SUCCESS  | 0/0         | 0/0      | SUCCESS |
+----------------------+-------------+-------------------+--------------+--------------+------------+----------+-------------+----------+---------+
| ent-backup-recovery  | ABORTED     | ABORTED           | 14/16        | 14/16        | ABORTED    | ABORTED  | 0/0         |          |         |
+----------------------+-------------+-------------------+--------------+--------------+------------+----------+-------------+----------+---------+
| er-pltfms-sanity     |             |                   |              |              |            |          |             |          |         |
+----------------------+-------------+-------------------+--------------+--------------+------------+----------+-------------+----------+---------+
| eventing             | SUCCESS     | SUCCESS           | SUCCESS      | SUCCESS      | SUCCESS    | SUCCESS  | ABORTED     | 0/36     |         |
+----------------------+-------------+-------------------+--------------+--------------+------------+----------+-------------+----------+---------+
| fts                  | SUCCESS     | SUCCESS           | SUCCESS      | SUCCESS      | SUCCESS    | SUCCESS  | 36/54       | 52/54    | SUCCESS |
+----------------------+-------------+-------------------+--------------+--------------+------------+----------+-------------+----------+---------+
| n1ql                 | 76/77       | 76/77             | 76/77        | 76/77        | 76/77      | 76/77    | 76/77       | 76/77    | 76/77   |
+----------------------+-------------+-------------------+--------------+--------------+------------+----------+-------------+----------+---------+
| nsserver             | 13/18       | 13/18             | 12/18        | 11/18        | 10/18      | 12/18    | 0/18        | 11/18    | 11/18   |
+----------------------+-------------+-------------------+--------------+--------------+------------+----------+-------------+----------+---------+
| rbac                 | SUCCESS     | SUCCESS           | SUCCESS      | SUCCESS      | SUCCESS    | SUCCESS  | SUCCESS     | SUCCESS  |         |
+----------------------+-------------+-------------------+--------------+--------------+------------+----------+-------------+----------+---------+
| rbac-n1ql            | SUCCESS     | SUCCESS           | SUCCESS      | SUCCESS      | SUCCESS    | SUCCESS  | ABORTED     | SUCCESS  |         |
+----------------------+-------------+-------------------+--------------+--------------+------------+----------+-------------+----------+---------+
| rza                  | 6/8         | 6/8               | 5/8          | 6/8          | 6/8        | 5/8      | 4/8         | 4/8      |         |
+----------------------+-------------+-------------------+--------------+--------------+------------+----------+-------------+----------+---------+
| security             |             |                   |              |              |            |          |             | SUCCESS  |         |
+----------------------+-------------+-------------------+--------------+--------------+------------+----------+-------------+----------+---------+
| security-check-audit | SUCCESS     | SUCCESS           | SUCCESS      | SUCCESS      | SUCCESS    | SUCCESS  | SUCCESS     | 0/3      |         |
+----------------------+-------------+-------------------+--------------+--------------+------------+----------+-------------+----------+---------+
| security-x509        | SUCCESS     | 0/13              | SUCCESS      | SUCCESS      | SUCCESS    | SUCCESS  | 1/13        | 6/13     |         |
+----------------------+-------------+-------------------+--------------+--------------+------------+----------+-------------+----------+---------+
| tools                | 62/70       | 62/70             | 62/70        | 59/70        | 61/70      | 62/70    | ABORTED     | 60/68    | 54/60   |
+----------------------+-------------+-------------------+--------------+--------------+------------+----------+-------------+----------+---------+
| transaction          | SUCCESS     | SUCCESS           | SUCCESS      | 7/8          | ABORTED    | ABORTED  | 2/8         | 7/8      | SUCCESS |
+----------------------+-------------+-------------------+--------------+--------------+------------+----------+-------------+----------+---------+
| view                 | SUCCESS     | SUCCESS           | SUCCESS      | SUCCESS      | SUCCESS    | SUCCESS  | ABORTED     | SUCCESS  | SUCCESS |
+----------------------+-------------+-------------------+--------------+--------------+------------+----------+-------------+----------+---------+
| xdcr                 | 18/19       | 18/19             | 18/19        | 0/0          | 18/19      | 18/19    | 18/19       | 13/19    | SUCCESS |
+----------------------+-------------+-------------------+--------------+--------------+------------+----------+-------------+----------+---------+

+------------+-------------+-------------------+--------------+--------------+------------+----------+-------------+----------+--------+
| 0_build    |   1_centos8 |   2_centosnonroot |   3_debian10 |   4_ubuntu20 |   5_suse15 |   6_oel8 |   7_windows |   8_ipv6 |   9_ce |
+============+=============+===================+==============+==============+============+==========+=============+==========+========+
| 7.0.0-4342 |          94 |                92 |           94 |           93 |         94 |       95 |          72 |       74 |     90 |
+------------+-------------+-------------------+--------------+--------------+------------+----------+-------------+----------+--------+
| 7.0.0-4291 |          93 |                90 |           92 |           94 |         94 |       84 |          69 |       74 |     90 |
+------------+-------------+-------------------+--------------+--------------+
```

To show summary for eventing and fts jobs:
```
% python3 job_summary.py -j eventing,fts
=====================================
Platform Certification for 7.0.0-4342
=====================================

0_job     1_centos8    2_centosnonroot    3_debian10    4_ubuntu20    5_suse15    6_oel8    7_windows    8_ipv6    9_ce
--------  -----------  -----------------  ------------  ------------  ----------  --------  -----------  --------  ------
eventing  36/36        36/36              36/36         36/36         36/36       36/36     ABORTED      0/36
fts       54/54        54/54              54/54         54/54         54/54       54/54     36/54        52/54     49/49

Job eventing had 36 failed test cases on 1 platforms with 1 unique stacks
 - 36 failures on ipv6 platform, see details at http://qa.sc.couchbase.com/job/test_suite_executor/309550

Job fts had 20 failed test cases on 2 platforms with 8 unique stacks
 - 2 failures on ipv6 platform, see details at http://qa.sc.couchbase.com/job/test_suite_executor/308591
 - 18 failures on windows platform, see details at http://qa.sc.couchbase.com/job/test_suite_executor-dynvm/3889
 ```
